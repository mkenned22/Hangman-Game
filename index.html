<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" media="screen" href="assets/css/style.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <title>Hangman</title>
    
</head>
<body>
    <header></header>
    <section>
        <div class="container">
            <div class="row">
                <div class= "col-md-8">
                    <div class="jumbotron">
                        <h1 id="hiddenWord"></h1>
                        <p><strong>Hint: </strong><span id="hint"></span></p>
                        <p><strong>Guesses Remaining: </strong><span id="remainingGuesses"></span></p>
                        <p id="wrongGuesses"><strong>Incorrect Guesses: </strong></p>
                    </div>
                </div>
                <div class= "col-md-4">
                        <div>
                           <img id="hangman-img" src="assets/images/hangman-0.png">
                        </div>
                    </div>
            </div>
            <div class="row">
                <div class= "col-md-12">
                    <div id="keyboard"></div>

                </div>
            </div>
        </div>
            
        <div> </div>
        
        
    </section>
    <footer></footer>
    



    <script>
        
        var words = {
            1 : { word: 'hangman', description: 'name of the game'},
            2 : { word: 'hangmanhangman', description : 'name of the game 2x'},
            3 : { word: 'hangmanhangmanhangman', description : 'name of the game 3x'}
        };

        var images = {
            1: "assets/images/hangman-10.png",
            2: "assets/images/hangman-9.png",
            3: "assets/images/hangman-8.png",
            4: "assets/images/hangman-7.png",
            5: "assets/images/hangman-6.png",
            6: "assets/images/hangman-5.png",
            7: "assets/images/hangman-4.png",
            8: "assets/images/hangman-3.png",
            9: "assets/images/hangman-2.png",
            10: "assets/images/hangman-1.png"
        }

        var wordArray  = Object.keys(words);
        var wordIndex  = Math.floor(Math.random() * wordArray.length);
        var randomKey    = wordArray[wordIndex];
        var randomWord  = words[randomKey]; 

        var displayWord = document.getElementById('hiddenWord');
        displayWord.innerHTML = '_'.repeat(randomWord.word.length);

        var hint = document.getElementById('hint');
        hint.innerHTML = randomWord.description
        
        var remainingGuesses = document.getElementById('remainingGuesses');  
        var remainingGuessValue = 10;
        remainingGuesses.innerHTML = remainingGuessValue.toString();

        var wrongGuesses = document.getElementById('wrongGuesses');
        var lettersAlreadyGuessed = [];
        
        var alphabet = ["Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M"];
        var keyboard = document.getElementById('keyboard');
        alphabet.forEach(function(event){
            html = "<button id=" + event.toLowerCase() + ' class="btn btn-default" onclick=letterPressed(' + '"' + event.toLowerCase() +'"' + ')>' + event + "</button>";
            keyboard.innerHTML += html;
            if(event === 'P'){
                keyboard.innerHTML += "<br>";
            }
            else if(event === 'L'){
                keyboard.innerHTML += "<br>";
            }
        });

        function letterPressed(letter) {
            document.getElementById(letter).style.color = "black";

            // if letter was not already guessed, continue
            if(lettersAlreadyGuessed.indexOf(letter) === -1){

                // correct guess :)
                if(randomWord.word.indexOf(letter) >=0){
                    for(i=0;i<randomWord.word.length;i++){
                        if(randomWord.word.charAt(i) === letter){
                            var tempWord = displayWord.innerHTML;
                            displayWord.innerHTML = tempWord.substr(0, i) + letter+ tempWord.substr(i + 1);
                        }
                    }
                    // you win :(
                    if(displayWord.innerHTML.indexOf('_') === -1){
                        alert("You win!");
                    }
                }
                // incorrect guess :(
                else{

                    wrongGuesses.innerHTML+= "<span>" + letter + " </span>";
                    remainingGuessValue--;
                    
                    remainingGuesses.innerHTML = remainingGuessValue.toString();
                    document.getElementById("hangman-img").src= images[remainingGuessValue+1];
                    
                    // you lose :(
                        if(remainingGuessValue === 0){
                        alert("You Lose!");
                    }
                }

                lettersAlreadyGuessed.push(letter);
                document.getElementById(letter).style.backgroundColor = "#385077";
                document.getElementById(letter).disabled = true;

            }
            else{
                alert("You have already guessed this letter. Please choose a letter that has not already been chosen.")
            } 
        }

        
        document.onkeydown = function(e) {
            var key = e.key;
            var keyCode = e.keyCode; 

            if(event.shiftKey){
                var key = e.key.toLowerCase();
            }
            else{
                var key = e.key;
            }

            if((keyCode >= 65 && keyCode <= 90) || (keyCode >= 97 && keyCode <= 122)){
                document.getElementById(key).style.color = "red";
            }
        };
        
        // keyboard event registered
        document.onkeyup = function(event) {
            var keyCode = event.keyCode;
            if(event.shiftKey){
                var key = event.key.toLowerCase();
            }
            else{
                var key = event.key;
            }
            
            // keyboard event is a letter 
            if((keyCode >= 65 && keyCode <= 90) || (keyCode >= 97 && keyCode <= 122)){
                letterPressed(key); 
            }  
        }

    </script>
</body>
</html>