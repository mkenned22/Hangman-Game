<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" media="screen" href="assets/css/style.css" />
    <title>Hangman</title>
    
</head>
<body>
    <header></header>
    <section>
        <div id="hiddenWord">

        </div>
        <div>Hint: <span id="hint"></span> </div>
        <div id="wrongGuesses">Incorrect Guesses:</div>
        <div>Guesses Remaining:
            <span id="remainingGuesses"></span>   
        </div>
        <div id="keyboard"></div>
    </section>
    <footer></footer>
    



    <script>
        
        var words = {
            1 : { word: 'hangman', description: 'name of the game'},
            2 : { word: 'hangmanhangman', description : 'name of the game 2x'},
            3 : { word: 'hangmanhangmanhangman', description : 'name of the game 3x'}
        };

        var wordArray  = Object.keys(words);
        var wordIndex  = Math.floor(Math.random() * wordArray.length);
        var randomKey    = wordArray[wordIndex];
        var randomWord  = words[randomKey]; 

        var displayWord = document.getElementById('hiddenWord');
        displayWord.innerHTML = '_'.repeat(randomWord.word.length);

        var hint = document.getElementById('hint');
        hint.innerHTML = randomWord.description
        
        var remainingGuesses = document.getElementById('remainingGuesses');  
        var remainingGuessValue = 8;
        remainingGuesses.innerHTML = remainingGuessValue.toString();

        var wrongGuesses = document.getElementById('wrongGuesses');
        var lettersAlreadyGuessed = [];
        
        var alphabet = ["Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M"];
        var keyboard = document.getElementById('keyboard');
        alphabet.forEach(function(event){
            html = "<button id=" + event.toLowerCase() + ' class="letter-button" onclick=letterPressed(' + '"' + event.toLowerCase() +'"' + ')>' + event + "</button>";
            keyboard.innerHTML += html;
            if(event === 'P'){
                keyboard.innerHTML += "<br>";
            }
            else if(event === 'L'){
                keyboard.innerHTML += "<br>";
            }
        });

        function letterPressed(letter) {
            document.getElementById(letter).style.color = "black";

            // if letter was not already guessed, continue
            if(lettersAlreadyGuessed.indexOf(letter) === -1){

                // correct guess :)
                if(randomWord.word.indexOf(letter) >=0){
                    for(i=0;i<randomWord.word.length;i++){
                        if(randomWord.word.charAt(i) === letter){
                            var tempWord = displayWord.innerHTML;
                            displayWord.innerHTML = tempWord.substr(0, i) + letter+ tempWord.substr(i + 1);
                        }
                    }
                    // you win :(
                    if(displayWord.innerHTML.indexOf('_') === -1){
                        alert("You win!");
                    }
                }
                // incorrect guess :(
                else{
                    wrongGuesses.innerHTML+= "<p>" + letter + "</p>";
                    remainingGuessValue--;
                    remainingGuesses.innerHTML = remainingGuessValue.toString();

                    // you lose :(
                        if(remainingGuessValue === 0){
                        alert("You Lose!");
                    }
                }

                lettersAlreadyGuessed.push(letter);
                document.getElementById(letter).style.backgroundColor = "#385077";
                document.getElementById(letter).disabled = true;

            }
            else{
                alert("You have already guessed this letter. Please choose a letter that has not already been chosen.")
            } 
        }

        
        document.onkeydown = function(e) {
            var key = e.key;
            var keyCode = e.keyCode;    
            if(keyCode >= 65 && keyCode <= 90){
                document.getElementById(e.key).style.color = "red";
            }
        };
        
        // keyboard event registered
        document.onkeyup = function(event) {
            var keyCode = event.keyCode;
            var key = event.key;
            
            // keyboard event is a letter 
            if(keyCode >= 65 && keyCode <= 90){
                letterPressed(key); 
            }  
        }

    </script>
</body>
</html>