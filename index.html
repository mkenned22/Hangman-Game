<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" media="screen" href="assets/css/style.css" />
    <title>Hangman</title>

</head>

<body>
    <header></header>
    <section>
        <div id="hiddenWord">

        </div>
        <div>Hint:
            <span id="hint"></span>
        </div>
        <div id="wrongGuesses">Incorrect Guesses:</div>
        <div>Guesses Remaining:
            <span id="remainingGuesses"></span>
        </div>
        <div id="keyboard"></div>
    </section>
    <footer></footer>




    <script>
        var words = {
            1: { word: 'hangman', description: 'name of the game' },
            2: { word: 'hangmanhangman', description: 'name of the game 2x' },
            3: { word: 'hangmanhangmanhangman', description: 'name of the game 3x' }
        };
        var alphabet = ["Q", "W", "E", "R", "T", "Y", "U", "I", "O", "P", "A", "S", "D", "F", "G", "H", "J", "K", "L", "Z", "X", "C", "V", "B", "N", "M"];

        var keyboard = document.getElementById('keyboard');
        alphabet.forEach(function (event) {
            html = "<button id=" + event.toLowerCase() + ">" + event + "</button>";
            keyboard.innerHTML += html;
            if (event === 'P') {
                keyboard.innerHTML += "<br>";
            }
            else if (event === 'L') {
                keyboard.innerHTML += "<br>";
            }
        });


        // This will course this will return the value of the randomKey
        // instead of a fresh random value
        var wordArray = Object.keys(words);
        var wordIndex = Math.floor(Math.random() * wordArray.length);
        var randomKey = wordArray[wordIndex];
        var randomWord = words[randomKey];


        var remainingGuessValue = 8;
        var lettersAlreadyGuessed = [];
        var displayWord = document.getElementById('hiddenWord');
        var hint = document.getElementById('hint');
        var wrongGuesses = document.getElementById('wrongGuesses');
        var remainingGuesses = document.getElementById('remainingGuesses');
        displayWord.innerHTML = '_'.repeat(randomWord.word.length);
        hint.innerHTML = randomWord.description
        remainingGuesses.innerHTML = remainingGuessValue.toString();

        document.onkeydown = function (e) {
            var key = e.key;
            var keyCode = e.keyCode;
            if (keyCode >= 65 && keyCode <= 90) {
                document.getElementById(event.key).style.color = "red";
            }
        };

        // keyboard event registered
        document.onkeyup = function (event) {
            var keyCode = event.keyCode;
            var key = event.key;

            // keyboard event is a letter 
            if (keyCode >= 65 && keyCode <= 90) {
                document.getElementById(event.key).style.color = "black";

                if (lettersAlreadyGuessed.indexOf(key) === -1) {

                    var tempWord = displayWord.innerHTML;
                    var index = randomWord.word.indexOf(key);
                    // correct guess :)
                    if (index >= 0) {
                        for (i = 0; i < randomWord.word.length; i++) {
                            if (randomWord.word.charAt(i) === key) {
                                displayWord.innerHTML = tempWord.substr(0, i) + key + tempWord.substr(i + 1);
                                tempWord = displayWord.innerHTML;
                            }
                        }
                        // you win :(
                        if (displayWord.innerHTML.indexOf('_') === -1) {
                            alert("You win!");
                        }
                    }
                    // incorrect guess :(
                    else {
                        wrongGuesses.innerHTML += "<p>" + key + "</p>";
                        remainingGuessValue--;
                        remainingGuesses.innerHTML = remainingGuessValue.toString();

                        // you lose :(
                        if (remainingGuessValue === 0) {
                            alert("You win!");
                        }
                    }
                    lettersAlreadyGuessed.push(key);
                    document.getElementById(event.key).style.backgroundColor = "#385077";
                    document.getElementById(event.key).disabled = true;

                }
                else {
                    alert("You have already guessed this letter. Please choose a letter that has not already been chosen.")
                }

            }



        }





    </script>
</body>

</html>